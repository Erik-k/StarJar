Version 4
SHEET 1 1112 680
WIRE 64 -304 -256 -304
WIRE 400 -304 64 -304
WIRE 480 -304 400 -304
WIRE 672 -304 480 -304
WIRE -256 -224 -256 -304
WIRE 64 -224 64 -304
WIRE 480 -192 480 -304
WIRE 0 -176 -48 -176
WIRE 672 -160 672 -304
WIRE -256 -112 -256 -144
WIRE -208 -112 -256 -112
WIRE -48 -112 -48 -176
WIRE -48 -112 -128 -112
WIRE -256 -96 -256 -112
WIRE 64 -96 64 -128
WIRE 384 -64 336 -64
WIRE 480 -64 480 -112
WIRE 480 -48 480 -64
WIRE 336 -32 336 -64
WIRE -256 -16 -256 -96
WIRE 144 -16 64 -16
WIRE 192 -16 144 -16
WIRE 304 -16 192 -16
WIRE 416 0 368 0
WIRE 672 0 672 -80
WIRE 304 16 272 16
WIRE -624 32 -752 32
WIRE -368 32 -624 32
WIRE -320 32 -368 32
WIRE 336 80 336 32
WIRE 400 80 400 -304
WIRE 400 80 336 80
WIRE -752 112 -752 32
WIRE -368 144 -368 32
WIRE 272 144 272 16
WIRE 432 144 272 144
WIRE 480 144 480 48
WIRE 480 144 432 144
WIRE 64 208 64 -16
WIRE 192 208 192 -16
WIRE 480 208 480 144
WIRE -752 336 -752 192
WIRE -368 336 -368 208
WIRE -368 336 -752 336
WIRE -256 336 -256 80
WIRE -256 336 -368 336
WIRE 64 336 64 288
WIRE 128 336 64 336
WIRE 192 336 192 272
WIRE 192 336 128 336
WIRE 384 336 384 -64
WIRE 384 336 192 336
WIRE 480 336 480 288
WIRE 480 336 384 336
WIRE 576 336 480 336
WIRE -368 384 -368 336
WIRE 128 400 128 336
FLAG 128 400 0
FLAG 672 0 0
FLAG -624 32 pulse_input
FLAG 480 -64 Collector
FLAG 432 144 RSense
FLAG -368 384 0
FLAG 144 -16 RC_timer
FLAG -256 -96 pnp_base
SYMBOL voltage -752 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(0 2 0 1m 1m 1n)
SYMBOL npn -320 -16 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL voltage 672 -176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL npn 416 -48 R0
SYMATTR InstName Q2
SYMBOL res 464 192 R0
SYMATTR InstName R2
SYMATTR Value 40
SYMBOL Opamps\\OP747 336 64 M180
SYMATTR InstName U2
SYMBOL voltage 480 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=1
SYMATTR InstName V3
SYMATTR Value 2.4
SYMBOL res -272 -240 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL pnp 0 -128 M180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL res 48 192 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL cap 176 208 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMATTR SpiceLine V=10 Irms=2.59 Rser=0.0171188 Lser=0
SYMBOL cap -384 144 R0
SYMATTR InstName C2
SYMATTR Value 220p
SYMBOL res -112 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL res 80 0 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 10
TEXT -960 168 Left 2 !.tran 10s
